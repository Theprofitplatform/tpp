<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chart Generation Test</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }
    .chart-container {
      position: relative;
      height: 400px;
      margin: 2rem 0;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .status {
      padding: 10px 20px;
      border-radius: 6px;
      margin: 20px 0;
      font-weight: 500;
    }
    .success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .loading {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
    }
  </style>
</head>
<body>
  <h1>📊 Chart.js Auto-Generation Test</h1>
  <p class="subtitle">Testing chart rendering from automated blog generation system</p>

  <div class="status loading" id="status">
    Loading Chart.js library...
  </div>

  <h2>Test 1: Performance Improvement (Before/After)</h2>
  <div class="chart-container">
    <canvas id="chart-before-after-test"></canvas>
  </div>

  <h2>Test 2: Key Statistics (Horizontal Bar)</h2>
  <div class="chart-container">
    <canvas id="chart-key-metrics-test"></canvas>
  </div>

  <script>
  (function() {
    // Load Chart.js from CDN
    if (typeof Chart === 'undefined') {
      const script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js';
      script.onload = initCharts;
      script.onerror = () => {
        document.getElementById('status').textContent = '❌ Failed to load Chart.js';
        document.getElementById('status').className = 'status error';
      };
      document.head.appendChild(script);
    } else {
      initCharts();
    }

    function initCharts() {
      document.getElementById('status').textContent = '✅ Chart.js loaded successfully - Rendering charts...';
      document.getElementById('status').className = 'status success';

      // Test Chart 1: Before/After Performance
      const ctx1 = document.getElementById('chart-before-after-test');
      if (ctx1) {
        new Chart(ctx1.getContext('2d'), {
          type: 'bar',
          data: {
            labels: [['CTR', 'Before → After'], ['Conversion Rate', 'Before → After']],
            datasets: [{
              label: 'Before',
              data: [2.1, 3.2],
              backgroundColor: 'rgba(239, 68, 68, 0.8)',
              borderColor: 'rgba(239, 68, 68, 1)',
              borderWidth: 2
            }, {
              label: 'After',
              data: [6.8, 5.9],
              backgroundColor: 'rgba(34, 197, 94, 0.8)',
              borderColor: 'rgba(34, 197, 94, 1)',
              borderWidth: 2
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: 'Performance Improvement',
                font: { size: 18, weight: 'bold' }
              },
              legend: {
                display: true
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function(value) {
                    return value + '%';
                  }
                }
              }
            }
          }
        });
      }

      // Test Chart 2: Key Metrics
      const ctx2 = document.getElementById('chart-key-metrics-test');
      if (ctx2) {
        new Chart(ctx2.getContext('2d'), {
          type: 'horizontalBar',
          data: {
            labels: [
              'Extensions increase CTR',
              'Businesses see more clicks',
              'Call extensions boost inquiries',
              'Location extensions increase foot traffic',
              'Monthly ad spend savings'
            ],
            datasets: [{
              label: 'Value',
              data: [224, 28, 47, 32, 1200],
              backgroundColor: [
                'rgba(99, 102, 241, 0.8)',
                'rgba(139, 92, 246, 0.8)',
                'rgba(168, 85, 247, 0.8)',
                'rgba(236, 72, 153, 0.8)',
                'rgba(251, 146, 60, 0.8)'
              ],
              borderColor: [
                'rgba(99, 102, 241, 1)',
                'rgba(139, 92, 246, 1)',
                'rgba(168, 85, 247, 1)',
                'rgba(236, 72, 153, 1)',
                'rgba(251, 146, 60, 1)'
              ],
              borderWidth: 2
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: 'Key Statistics',
                font: { size: 18, weight: 'bold' }
              },
              legend: {
                display: false
              }
            },
            scales: {
              x: {
                beginAtZero: true
              }
            }
          }
        });
      }

      // Update status after charts render
      setTimeout(() => {
        document.getElementById('status').textContent = '✅ All charts rendered successfully!';
      }, 500);
    }
  })();
  </script>
</body>
</html>
