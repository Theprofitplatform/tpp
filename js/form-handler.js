document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("contact-form");let t=document.getElementById("formStatus");t||(t=function(){const t=document.createElement("div");return t.id="formStatus",t.className="form-status",e&&e.parentElement.insertBefore(t,e),t}()),e&&e.addEventListener("submit",(async function(n){n.preventDefault();const a=e.querySelector(".submit-btn"),s=a.innerHTML;a.innerHTML='<i class="fas fa-spinner fa-spin"></i> Sending...',a.disabled=!0,t.innerHTML="",t.className="form-status";const r=new FormData(e),i={};for(let[e,t]of r.entries())"services"===e?(i[e]||(i[e]=[]),i[e].push(t)):i[e]=t;try{let n=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(n.ok||200===n.status||(n=await fetch("https://formspree.io/f/xanadvkv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})),!n.ok)throw new Error("Form submission failed");t.className="form-status success",t.innerHTML='\n                    <div class="success-message">\n                        <i class="fas fa-check-circle"></i>\n                        <h3>Thank You!</h3>\n                        <p>We\'ve received your message and will get back to you within 24 hours.</p>\n                    </div>\n                ',e.reset(),"undefined"!=typeof gtag&&gtag("event","generate_lead",{event_category:"engagement",event_label:"contact_form",value:i.budget||"not_specified"}),"undefined"!=typeof hj&&hj("event","contact_form_submitted"),"undefined"!=typeof fbq&&fbq("track","Lead",{content_name:"Contact Form",content_category:"Lead Generation"}),t.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(e){t.className="form-status error",t.innerHTML='\n                <div class="error-message">\n                    <i class="fas fa-exclamation-triangle"></i>\n                    <h3>Oops! Something went wrong.</h3>\n                    <p>Please try again or call us directly at <a href="tel:0402566265">0402 566 265</a></p>\n                </div>\n            '}finally{a.innerHTML=s,a.disabled=!1}}));function n(){const e=this,t=document.getElementById(e.id+"-error");if(e.classList.remove("error"),e.setAttribute("aria-invalid","false"),t&&(t.textContent=""),e.hasAttribute("required")&&!e.value.trim())return a(e,"This field is required"),!1;if("email"===e.type&&e.value){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value))return a(e,"Please enter a valid email address"),!1}if("tel"===e.type&&e.value){const t=/^(\+?61|0)[2-9]\d{8}$/,n=e.value.replace(/\s|-/g,"");if(!t.test(n))return a(e,"Please enter a valid Australian phone number"),!1}return!0}function a(e,t){e.classList.add("error"),e.setAttribute("aria-invalid","true");const n=document.getElementById(e.id+"-error");n&&(n.textContent=t)}e.querySelectorAll("input, textarea, select").forEach((e=>{e.addEventListener("blur",n),e.addEventListener("input",(()=>{e.classList.contains("error")&&n.call(e)}))}));const s=document.getElementById("phone");s&&s.addEventListener("input",(function(e){let t=e.target.value.replace(/\D/g,"");t.length>0&&(t.startsWith("61")&&(t=t.replace(/^61/,"")),t=t.replace(/^0/,""),t=t.length<=3?"0"+t:t.length<=6?"0"+t.slice(0,3)+" "+t.slice(3):"0"+t.slice(0,3)+" "+t.slice(3,6)+" "+t.slice(6,9),e.target.value=t)}))}));