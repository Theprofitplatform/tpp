export const $=(e,t=document)=>t.querySelector(e);export const $$=(e,t=document)=>[...t.querySelectorAll(e)];export const delegate=(e,t,o,r)=>{e.addEventListener(t,(e=>{const t=e.target.closest(o);t&&r(e,t)}))};export const debounce=(e,t)=>{let o;return(...r)=>{clearTimeout(o),o=setTimeout((()=>e(...r)),t)}};export const throttle=(e,t)=>{let o;return(...r)=>{o||(e(...r),o=!0,setTimeout((()=>o=!1),t))}};export const fetchWithRetry=async(e,t={},o=3)=>{for(let r=0;r<o;r++)try{const o=await fetch(e,t);if(o.ok)return o}catch(e){if(r===o-1)throw e;await new Promise((e=>setTimeout(e,1e3*Math.pow(2,r))))}};export const storage={set(e,t,o=60){const r={value:t,expiry:Date.now()+60*o*1e3};localStorage.setItem(e,JSON.stringify(r))},get(e){const t=localStorage.getItem(e);if(!t)return null;const o=JSON.parse(t);return Date.now()>o.expiry?(localStorage.removeItem(e),null):o.value}};export const measurePerformance=e=>{const t=performance.now();return()=>{const o=performance.now()-t;console.log(`âš¡ ${e} took ${o.toFixed(2)}ms`),window.gtag&&gtag("event","timing_complete",{name:e,value:Math.round(o)})}};export const lazyLoad=e=>{let t=null;return async(...o)=>(t||(t=await e()),t.default?t.default(...o):t(...o))};export const observeLazy=(e,t,o={})=>{const r=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(t(e.target),r.unobserve(e.target))}))}),{rootMargin:"50px",...o});return e.forEach((e=>r.observe(e))),r};const moduleCache=new Map;export const loadModule=async e=>{if(moduleCache.has(e))return moduleCache.get(e);const t=await import(`./${e}.js`);return moduleCache.set(e,t),t};export const supports={webp:async()=>{const e=new Image;return e.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",new Promise((t=>{e.onload=e.onerror=()=>t(1===e.width)}))},observer:"IntersectionObserver"in window,customElements:"customElements"in window,modules:"noModule"in HTMLScriptElement.prototype,webWorker:"Worker"in window,serviceWorker:"serviceWorker"in navigator};export const track=(e,t={})=>{window.gtag&&gtag("event",e,t),window.fbq&&fbq("trackCustom",e,t),console.log("ðŸ“Š Event tracked:",e,t)};export const ready=e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)};export default{$:$,$$:$$,delegate:delegate,debounce:debounce,throttle:throttle,fetchWithRetry:fetchWithRetry,storage:storage,measurePerformance:measurePerformance,lazyLoad:lazyLoad,observeLazy:observeLazy,loadModule:loadModule,supports:supports,track:track,ready:ready};