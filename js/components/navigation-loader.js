!function(){"use strict";const a={navigationScriptPath:"js/components/navigation.js",templatePath:"templates/navigation.html",loadTimeout:5e3,retryAttempts:1,debug:!0};let t=null,e=0,n={navigation:!1};function i(...t){a.debug&&console.log("[NavigationLoader]",...t)}function o(...a){console.error("[NavigationLoader]",...a)}function l(t,e=null){return new Promise(((n,l)=>{if(function(a){return null!==document.querySelector(`script[src="${a}"]`)}(t))return i(`Script already loaded: ${t}`),void n();const r=document.createElement("script");r.src=t,r.async=!1,e&&(r.integrity=e,r.crossOrigin="anonymous"),r.onload=()=>{i(`Script loaded successfully: ${t}`),n()},r.onerror=()=>{o(`Failed to load script: ${t}`),l(new Error(`Failed to load script: ${t}`))};const s=setTimeout((()=>{o(`Script load timeout: ${t}`),l(new Error(`Script load timeout: ${t}`))}),a.loadTimeout);r.onload=()=>{clearTimeout(s),i(`Script loaded successfully: ${t}`),n()},r.onerror=()=>{clearTimeout(s),o(`Failed to load script: ${t}`),l(new Error(`Failed to load script: ${t}`))},document.head.appendChild(r)}))}function r(){try{if(i("Initializing navigation component..."),"function"!=typeof window.NavigationComponent)throw new Error("NavigationComponent not available");s();return t=new window.NavigationComponent({templatePath:a.templatePath,targetSelector:"body",insertPosition:"afterbegin",autoInit:!0,activePageDetection:!0,smoothTransitions:!0,scrollEffects:!0,accessibilityFeatures:!0,mobileBreakpoint:968,cacheTemplate:!0,debug:a.debug}),document.addEventListener("navigation:loaded",(()=>{i("Navigation loaded event received"),document.body.classList.add("navigation-loaded")})),document.addEventListener("navigation:error",(a=>{o("Navigation error event received:",a.detail),document.body.classList.add("navigation-error")})),document.addEventListener("visibilitychange",(()=>{t&&document.hidden&&(t.state.mobileMenuOpen&&t.closeMobileMenu(),t.state.activeDropdown&&t.closeDropdown(t.state.activeDropdown))})),window.addEventListener("popstate",(()=>{t&&t.refresh()})),i("Navigation component initialized successfully"),t}catch(a){throw o("Failed to initialize navigation component:",a),a}}function s(){const a=window.location.pathname.split("/").pop();return a&&"index.html"!==a&&""!==a?a.replace(".html",""):"home"}async function d(){e++;try{await async function(){try{return i("Loading navigation scripts..."),await l(a.navigationScriptPath),n.navigation=!0,i("All navigation scripts loaded successfully"),!0}catch(a){throw o("Failed to load navigation scripts:",a),a}}(),await r(),i("Navigation loading completed successfully"),document.dispatchEvent(new CustomEvent("navigationLoader:success",{detail:{instance:t,attempts:e}}))}catch(t){o(`Navigation loading failed (attempt ${e}):`,t),e<a.retryAttempts?(i(`Retrying navigation load in 1 second... (${e}/${a.retryAttempts})`),setTimeout(d,1e3)):(o("Navigation loading failed after all retry attempts"),document.dispatchEvent(new CustomEvent("navigationLoader:failed",{detail:{error:t,attempts:e}})),function(){i("Attempting to show fallback navigation...");const a=document.querySelector("header#header, .premium-nav, nav");a?(a.style.display="block",a.style.visibility="visible",i("Fallback navigation displayed")):(i("No fallback navigation found - creating basic navigation for tests"),function(){const a=document.body,t='\n            \x3c!-- Test Navigation (Fallback) --\x3e\n            <header id="header" role="banner" class="premium-nav">\n                <div class="container">\n                    <a href="index.html" class="logo premium-logo">\n                        <img src="images/optimized/logo.png" alt="The Profit Platform Logo" width="150" height="50">\n                    </a>\n\n                    <nav id="primary-navigation" role="navigation" aria-label="Main navigation">\n                        <ul class="nav-links premium-nav-links" role="menubar">\n                            <li><a href="index.html" class="nav-item premium-nav-item" data-page="home">Home</a></li>\n                            <li><a href="pricing.html" class="nav-item premium-nav-item" data-page="pricing">Pricing</a></li>\n                            <li><a href="about.html" class="nav-item premium-nav-item" data-page="about">About</a></li>\n                            <li><a href="portfolio.html" class="nav-item premium-nav-item" data-page="portfolio">Portfolio</a></li>\n                            <li><a href="contact.html" class="nav-item premium-nav-item" data-page="contact">Contact</a></li>\n                        </ul>\n                    </nav>\n\n                    <button class="menu-toggle" id="menuToggle" aria-label="Open mobile menu" type="button">\n                        <span></span><span></span><span></span>\n                    </button>\n                </div>\n            </header>\n\n            <div class="mobile-nav" id="mobileNav" aria-hidden="true">\n                <div class="mobile-nav-header">\n                    <div class="mobile-nav-logo">\n                        <img src="images/optimized/logo.png" alt="The Profit Platform Logo" width="120" height="40">\n                    </div>\n                    <button class="mobile-nav-close" id="mobileNavClose" aria-label="Close mobile menu" type="button">\n                        <span>&times;</span>\n                    </button>\n                </div>\n                <nav class="mobile-nav-links">\n                    <a href="index.html" class="mobile-nav-link" data-page="home">Home</a>\n                    <a href="pricing.html" class="mobile-nav-link" data-page="pricing">Pricing</a>\n                    <a href="about.html" class="mobile-nav-link" data-page="about">About</a>\n                    <a href="portfolio.html" class="mobile-nav-link" data-page="portfolio">Portfolio</a>\n                    <a href="contact.html" class="mobile-nav-link" data-page="contact">Contact</a>\n                </nav>\n            </div>\n            <div class="mobile-nav-overlay" id="mobileNavOverlay" aria-hidden="true"></div>\n        ';a.insertAdjacentHTML("afterbegin",t);const e=s();document.querySelectorAll(`[data-page="${e}"]`).forEach((a=>{a.classList.add("active"),a.setAttribute("aria-current","page")})),i("Basic test navigation created")}())}())}}function c(){i("Navigation loader starting..."),null===document.querySelector("header#header, .premium-nav")?(document.body.classList.add("navigation-loading"),d()):i("Existing navigation detected, skipping dynamic loading")}var m;window.NavigationLoader={init:c,getInstance:()=>t,reload:()=>{t&&(t.destroy(),t=null),e=0,c()},config:a},m=()=>{setTimeout(c,100)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m(),i("Navigation loader script loaded")}();