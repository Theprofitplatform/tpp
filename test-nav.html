<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Debug Test</title>

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Navigation Styles -->
    <link rel="stylesheet" href="css/modern-theme-variables.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/modern-theme-components.css">
    <link rel="stylesheet" href="css/navigation-dropdown-fix.css">

    <style>
        /* Debug styles */
        body {
            margin: 0 !important;
            padding: 0 !important;
            background: #f5f5f5;
            min-height: 200vh; /* For testing scroll */
        }

        .debug-info {
            position: fixed;
            top: 50%;
            left: 20px;
            background: #000;
            color: #0f0;
            padding: 20px;
            font-family: monospace;
            z-index: 10000;
            border-radius: 5px;
            max-width: 400px;
        }

        .debug-info h3 {
            margin: 0 0 10px 0;
            color: #0ff;
        }

        .debug-info p {
            margin: 5px 0;
            font-size: 12px;
        }

        .test-content {
            padding: 150px 20px;
            text-align: center;
        }

        .test-content h1 {
            margin: 20px 0;
        }

        /* Highlight navigation elements for debugging */
        .premium-nav {
            border: 2px solid red !important;
        }

        .nav-floating-container {
            border: 2px solid blue !important;
        }

        .container {
            border: 2px solid green !important;
        }

        #primary-navigation {
            border: 2px solid yellow !important;
        }
    </style>
</head>
<body>
    <!-- Navigation will be loaded here -->
    <script src="js/components/navigation-inline.js"></script>

    <!-- Debug Info Panel -->
    <div class="debug-info" id="debugInfo">
        <h3>Navigation Debug Info</h3>
        <p id="navStatus">Loading...</p>
        <p id="navPosition">Position: ...</p>
        <p id="navDimensions">Dimensions: ...</p>
        <p id="scrollInfo">Scroll: 0px</p>
        <p id="dropdownStatus">Dropdowns: ...</p>
        <p id="mobileMenuStatus">Mobile Menu: ...</p>
        <p id="errorLog">Errors: None</p>
    </div>

    <!-- Test Content -->
    <div class="test-content">
        <h1>Navigation Debug Test Page</h1>
        <p>This page tests the navigation component functionality.</p>
        <p>Scroll down to test sticky behavior.</p>

        <div style="margin-top: 100px;">
            <h2>Test Section 1</h2>
            <p>Lorem ipsum dolor sit amet...</p>
        </div>

        <div style="margin-top: 100px;">
            <h2>Test Section 2</h2>
            <p>Lorem ipsum dolor sit amet...</p>
        </div>
    </div>

    <script>
        // Debug Script
        window.addEventListener('load', function() {
            const debugInfo = {
                navStatus: document.getElementById('navStatus'),
                navPosition: document.getElementById('navPosition'),
                navDimensions: document.getElementById('navDimensions'),
                scrollInfo: document.getElementById('scrollInfo'),
                dropdownStatus: document.getElementById('dropdownStatus'),
                mobileMenuStatus: document.getElementById('mobileMenuStatus'),
                errorLog: document.getElementById('errorLog')
            };

            // Check if navigation is loaded
            function checkNavigation() {
                const nav = document.querySelector('.premium-nav');
                const header = document.getElementById('header');
                const primaryNav = document.getElementById('primary-navigation');
                const dropdowns = document.querySelectorAll('.nav-dropdown');
                const mobileMenu = document.getElementById('mobileNav');

                if (nav) {
                    debugInfo.navStatus.textContent = 'Navigation: LOADED ✓';

                    // Get position info
                    const rect = nav.getBoundingClientRect();
                    const computedStyle = window.getComputedStyle(nav);
                    debugInfo.navPosition.textContent = `Position: top=${rect.top}px, left=${rect.left}px, fixed=${computedStyle.position}`;
                    debugInfo.navDimensions.textContent = `Dimensions: ${rect.width}x${rect.height}px`;

                    // Check dropdowns
                    if (dropdowns.length > 0) {
                        debugInfo.dropdownStatus.textContent = `Dropdowns: ${dropdowns.length} found`;

                        // Test dropdown functionality
                        dropdowns.forEach((dropdown, index) => {
                            const trigger = dropdown.querySelector('.nav-item');
                            if (trigger) {
                                trigger.addEventListener('mouseenter', () => {
                                    console.log(`Dropdown ${index} hover triggered`);
                                });
                            }
                        });
                    } else {
                        debugInfo.dropdownStatus.textContent = 'Dropdowns: None found';
                    }

                    // Check mobile menu
                    if (mobileMenu) {
                        const isActive = mobileMenu.classList.contains('active');
                        debugInfo.mobileMenuStatus.textContent = `Mobile Menu: ${isActive ? 'OPEN' : 'CLOSED'}`;
                    }
                } else {
                    debugInfo.navStatus.textContent = 'Navigation: NOT LOADED ✗';
                }
            }

            // Monitor scroll
            window.addEventListener('scroll', function() {
                debugInfo.scrollInfo.textContent = `Scroll: ${window.scrollY}px`;

                const header = document.getElementById('header');
                if (header) {
                    const hasScrolled = header.classList.contains('scrolled');
                    debugInfo.scrollInfo.textContent += ` | Header: ${hasScrolled ? 'SCROLLED' : 'NORMAL'}`;
                }
            });

            // Capture errors
            window.addEventListener('error', function(e) {
                debugInfo.errorLog.textContent = `Error: ${e.message}`;
                console.error('Navigation Error:', e);
            });

            // Run checks
            checkNavigation();

            // Re-check after a delay
            setTimeout(checkNavigation, 1000);
            setTimeout(checkNavigation, 2000);

            // Test dropdown click
            setTimeout(() => {
                const servicesDropdown = document.querySelector('.nav-dropdown .nav-item');
                if (servicesDropdown) {
                    console.log('Testing dropdown click...');
                    servicesDropdown.click();

                    setTimeout(() => {
                        const dropdownMenu = document.querySelector('.dropdown-menu');
                        if (dropdownMenu && dropdownMenu.style.display !== 'none') {
                            debugInfo.dropdownStatus.textContent = 'Dropdowns: WORKING ✓';
                        } else {
                            debugInfo.dropdownStatus.textContent = 'Dropdowns: NOT WORKING ✗';
                        }
                    }, 500);
                }
            }, 3000);
        });
    </script>
</body>
</html>