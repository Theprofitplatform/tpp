{"createdAt":"2025-09-05T21:52:55.561Z","updatedAt":"2025-09-21T14:24:02.391Z","id":"v1SDz1N1z6ICe2cD","name":"SEO Keyword Research (Sydney) â†’ Notion + Discord","active":false,"isArchived":false,"nodes":[{"parameters":{"rule":{"interval":[{"triggerAtHour":9,"triggerAtMinute":0}]}},"id":"a8f3d2b1-cron","name":"Cron (09:00 daily)","type":"n8n-nodes-base.cron","typeVersion":2,"position":[200,280],"notesInFlow":true,"notes":"Runs daily at 09:00 (server time). Adjust in node if needed."},{"parameters":{"values":{"string":[{"name":"BASE_URL","value":"http://localhost:8002"},{"name":"PROJECT_ID","value":"1"},{"name":"SEED","value":"house painters Sydney"},{"name":"CITY","value":"Sydney"},{"name":"COUNTRY","value":"Australia"},{"name":"TOP_N","value":"25"}]},"options":{}},"id":"b4e6f8c2-vars","name":"Set Variables","type":"n8n-nodes-base.set","typeVersion":2,"position":[420,280]},{"parameters":{"url":"={{$json[\"BASE_URL\"] + \"/seo/keywords/run\"}}","method":"POST","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"bodyParameters":{"parameters":[]},"jsonParameters":true,"bodyParametersJson":"{\n  \"project_id\": {{$json[\"PROJECT_ID\"]}},\n  \"seed\": \"{{$json[\"SEED\"]}}\",\n  \"city\": \"{{$json[\"CITY\"]}}\",\n  \"country\": \"{{$json[\"COUNTRY\"]}}\",\n  \"limit\": 100\n}","options":{}},"id":"c7a9d3e4-run","name":"POST Run Keywords","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[660,280]},{"parameters":{"amount":45,"unit":"seconds"},"id":"d8b0e5f6-wait","name":"Wait 45s","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[860,280]},{"parameters":{"url":"={{$node[\"POST Run Keywords\"].json[\"query_id\"] ? $node[\"Set Variables\"].json[\"BASE_URL\"] + \"/seo/keywords/\" + $node[\"POST Run Keywords\"].json[\"query_id\"] : \"\"}}","method":"GET","sendHeaders":false,"sendBody":false,"options":{}},"id":"e9c1f708-fetch","name":"GET Results","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1060,280]},{"parameters":{"jsCode":"// Extract and sort keywords by volume\nconst topN = Number($node[\"Set Variables\"].json.TOP_N || 25);\nconst results = $node[\"GET Results\"].json;\nconst items = results.items || [];\n\n// Sort by volume descending\nitems.sort((a, b) => (b.volume || 0) - (a.volume || 0));\n\n// Return top N as separate items for Notion\nreturn items.slice(0, topN).map(kw => ({\n  json: {\n    ...kw,\n    project_id: $node[\"Set Variables\"].json.PROJECT_ID,\n    location: `${$node[\"Set Variables\"].json.CITY}, ${$node[\"Set Variables\"].json.COUNTRY}`\n  }\n}));"},"id":"f0d2g819-topn","name":"Pick Top N","type":"n8n-nodes-base.code","typeVersion":2,"position":[1260,280]},{"parameters":{"operation":"create","databaseId":"YOUR_NOTION_DATABASE_ID","propertiesUi":{"propertyValues":[{"key":"Keyword","title":[{"text":{"content":"={{$json[\"keyword\"]}}"}}]},{"key":"Volume","number":"={{$json[\"volume\"] || 0}}"},{"key":"CPC","number":"={{$json[\"cpc\"] || 0}}"},{"key":"Difficulty","number":"={{$json[\"kd\"] || 0}}"},{"key":"Intent","select":{"name":"={{$json[\"intent\"] || \"informational\"}}"}},{"key":"Project","richText":[{"text":{"content":"Project {{$json[\"project_id\"]}}"}}]},{"key":"Location","richText":[{"text":{"content":"={{$json[\"location\"]}}"}}]}]}},"id":"g1e3h92a-notion","name":"Notion â†’ Database","type":"n8n-nodes-base.notion","typeVersion":2.2,"position":[1460,240],"credentials":{"notionApi":{"id":"YOUR_NOTION_CREDENTIAL_ID","name":"Notion Account"}}},{"parameters":{"webhookUrl":"YOUR_DISCORD_WEBHOOK_URL","text":"=**SEO Keyword Research Complete**\\n\\nðŸŽ¯ **Seed:** {{$node[\"Set Variables\"].json.SEED}}\\nðŸ“ **Location:** {{$node[\"Set Variables\"].json.CITY}}, {{$node[\"Set Variables\"].json.COUNTRY}}\\nðŸ“Š **Top Keywords Found:**\\n\\n{{$items(\"Pick Top N\").slice(0, 10).map((item, index) => `${index + 1}. **${item.json.keyword}**\\n   Volume: ${item.json.volume.toLocaleString()} | CPC: $${item.json.cpc.toFixed(2)} | Difficulty: ${Math.round(item.json.kd)}%`).join(\"\\n\\n\")}}\\n\\nðŸ“¥ **Download Full CSV:**\\n{{$node[\"Set Variables\"].json.BASE_URL}}/seo/keywords/{{$node[\"POST Run Keywords\"].json.query_id}}/export.csv\\n\\nâœ… **Status:** {{$node[\"GET Results\"].json.total}} keywords analyzed","options":{"username":"SEO Bot","avatarUrl":"https://cdn.discordapp.com/embed/avatars/0.png"}},"id":"h2f4i03b-discord","name":"Discord â†’ Summary","type":"n8n-nodes-base.discord","typeVersion":2,"position":[1460,340]},{"parameters":{"conditions":{"boolean":[{"value1":"={{$node[\"GET Results\"].json.status}}","value2":"completed"}]}},"id":"i3g5j14c-check","name":"Check Status","type":"n8n-nodes-base.if","typeVersion":2,"position":[1160,280]}],"connections":{"Cron (09:00 daily)":{"main":[[{"node":"Set Variables","type":"main","index":0}]]},"Set Variables":{"main":[[{"node":"POST Run Keywords","type":"main","index":0}]]},"POST Run Keywords":{"main":[[{"node":"Wait 45s","type":"main","index":0}]]},"Wait 45s":{"main":[[{"node":"GET Results","type":"main","index":0}]]},"GET Results":{"main":[[{"node":"Check Status","type":"main","index":0}]]},"Check Status":{"main":[[{"node":"Pick Top N","type":"main","index":0}],[]]},"Pick Top N":{"main":[[{"node":"Notion â†’ Database","type":"main","index":0},{"node":"Discord â†’ Summary","type":"main","index":0}]]}},"settings":{},"staticData":{},"meta":null,"pinData":null,"versionId":"1eb3d194-d6fe-4e52-a3a2-0c01a26f1752","triggerCount":1,"shared":[{"createdAt":"2025-09-05T21:52:55.561Z","updatedAt":"2025-09-05T21:52:55.561Z","role":"workflow:owner","workflowId":"v1SDz1N1z6ICe2cD","projectId":"55VrbeDl3nbECwkj"}],"tags":[]}
