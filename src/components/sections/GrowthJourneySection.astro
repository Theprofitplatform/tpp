---
// High-Conversion Growth Journey Section - Redesigned Funnel
---

<!-- Growth Journey Section -->
<section class="growth-journey-section section animate-on-scroll" id="growth-journey">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Let's Start Your Growth Journey</h2>
      <p class="section-subtitle">Get your free consultation and custom growth strategy within 24 hours</p>
    </div>

    <div class="growth-funnel-container">
      <!-- Left Column: Two-Step Form -->
      <div class="form-column">
        <div class="form-card">
          <!-- Progress Indicator -->
          <div class="form-progress" id="formProgress">
            <div class="progress-steps">
              <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Step 1 of 2</div>
              </div>
              <div class="progress-connector"></div>
              <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Step 2 of 2</div>
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
          </div>

          <!-- Success/Error Messages -->
          <div id="form-success" class="form-message success-message" style="display: none;" role="alert" aria-live="polite">
            <div class="message-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="message-content">
              <h3>Thank you for reaching out!</h3>
              <p>We've received your information and will respond within 15 minutes during business hours.</p>
              <p>For urgent inquiries, call us directly at <a href="tel:+61487286451">0487 286 451</a></p>
            </div>
          </div>

          <div id="form-error" class="form-message error-message" style="display: none;" role="alert" aria-live="polite">
            <div class="message-icon">
              <i class="fas fa-exclamation-circle"></i>
            </div>
            <div class="message-content">
              <h3>Oops! Something went wrong</h3>
              <p>Please try again or contact us directly at <a href="mailto:avi@theprofitplatform.com.au">avi@theprofitplatform.com.au</a></p>
            </div>
          </div>

          <!-- Two-Step Form -->
          <form id="growthFunnelForm" class="growth-funnel-form" method="POST" novalidate>
            <!-- Honeypot Field -->
            <input type="text" name="company_website" class="honeypot" tabindex="-1" aria-hidden="true">

            <!-- Step 1: Essential Information -->
            <div class="form-step active" id="step1">
              <div class="step-header">
                <h3 class="step-title">Tell us about yourself</h3>
                <p class="step-subtitle">We'll create a custom growth strategy just for you</p>
              </div>

              <div class="form-group">
                <label for="name" class="form-label">
                  Your Name <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  class="form-input"
                  required
                  aria-required="true"
                  aria-describedby="name-error"
                  placeholder="John Smith"
                  autocomplete="given-name"
                >
                <div id="name-error" class="field-error" role="alert" aria-live="polite"></div>
              </div>

              <div class="form-group">
                <label for="email" class="form-label">
                  Email Address <span class="required">*</span>
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="form-input"
                  required
                  aria-required="true"
                  aria-describedby="email-error"
                  placeholder="john@business.com.au"
                  autocomplete="email"
                >
                <div id="email-error" class="field-error" role="alert" aria-live="polite"></div>
              </div>

              <!-- Service Selection Pills -->
              <div class="form-group service-selection">
                <label class="form-label">What service interests you most? <span class="required">*</span></label>
                <div class="service-pills" role="radiogroup" aria-labelledby="service-label">
                  <input type="radio" id="service-seo" name="service" value="seo" class="service-radio" required>
                  <label for="service-seo" class="service-pill">
                    <div class="pill-icon">
                      <i class="fas fa-search"></i>
                    </div>
                    <span class="pill-label">SEO</span>
                  </label>

                  <input type="radio" id="service-ads" name="service" value="paid-ads" class="service-radio">
                  <label for="service-ads" class="service-pill">
                    <div class="pill-icon">
                      <i class="fab fa-google"></i>
                    </div>
                    <span class="pill-label">Paid Ads</span>
                  </label>

                  <input type="radio" id="service-web" name="service" value="web-design" class="service-radio">
                  <label for="service-web" class="service-pill">
                    <div class="pill-icon">
                      <i class="fas fa-code"></i>
                    </div>
                    <span class="pill-label">Web Design</span>
                  </label>

                  <input type="radio" id="service-full" name="service" value="full-strategy" class="service-radio">
                  <label for="service-full" class="service-pill">
                    <div class="pill-icon">
                      <i class="fas fa-rocket"></i>
                    </div>
                    <span class="pill-label">Full Strategy</span>
                  </label>
                </div>
                <div id="service-error" class="field-error" role="alert" aria-live="polite"></div>
              </div>

              <div class="step-actions">
                <button type="button" class="btn-next" id="nextToStep2">
                  Continue to Step 2
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>

            <!-- Step 2: Detailed Information -->
            <div class="form-step" id="step2">
              <div class="step-header">
                <h3 class="step-title">Let's get specific about your goals</h3>
                <p class="step-subtitle">This helps us create your personalized growth plan</p>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="phone" class="form-label">
                    Phone Number
                  </label>
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    class="form-input phone-input"
                    aria-describedby="phone-error"
                    placeholder="+61 400 000 000"
                    autocomplete="tel"
                  >
                  <div id="phone-error" class="field-error" role="alert" aria-live="polite"></div>
                </div>

                <div class="form-group">
                  <label for="business" class="form-label">
                    Business Name
                  </label>
                  <input
                    type="text"
                    id="business"
                    name="business"
                    class="form-input"
                    aria-describedby="business-error"
                    placeholder="Your Business Name"
                    autocomplete="organization"
                  >
                  <div id="business-error" class="field-error" role="alert" aria-live="polite"></div>
                </div>
              </div>

              <!-- Quick Goal Selection -->
              <div class="form-group">
                <label class="form-label">What's your primary goal? (Select all that apply)</label>
                <div class="goal-chips">
                  <label class="goal-chip">
                    <input type="checkbox" name="goals[]" value="more-calls">
                    <span class="chip-content">
                      <i class="fas fa-phone"></i>
                      More Calls
                    </span>
                  </label>
                  <label class="goal-chip">
                    <input type="checkbox" name="goals[]" value="rank-higher">
                    <span class="chip-content">
                      <i class="fas fa-chart-line"></i>
                      Rank Higher
                    </span>
                  </label>
                  <label class="goal-chip">
                    <input type="checkbox" name="goals[]" value="lower-costs">
                    <span class="chip-content">
                      <i class="fas fa-dollar-sign"></i>
                      Lower Costs
                    </span>
                  </label>
                </div>
              </div>

              <!-- Website Field with Preview -->
              <div class="form-group">
                <label for="website" class="form-label">
                  Current Website
                </label>
                <div class="website-input-wrapper">
                  <input
                    type="url"
                    id="website"
                    name="website"
                    class="form-input website-input"
                    aria-describedby="website-error"
                    placeholder="www.yourbusiness.com.au"
                  >
                  <div class="website-preview" id="websitePreview" style="display: none;">
                    <img class="favicon-preview" alt="Website favicon">
                    <span class="domain-preview"></span>
                  </div>
                </div>
                <div id="website-error" class="field-error" role="alert" aria-live="polite"></div>
              </div>

              <!-- Privacy Consent -->
              <div class="form-group privacy-group">
                <label class="privacy-checkbox">
                  <input type="checkbox" name="privacy_consent" required aria-required="true">
                  <span class="checkmark"></span>
                  <span class="privacy-text">
                    I agree to the <a href="/privacy-policy" target="_blank">Privacy Policy</a> and consent to being contacted about my business growth needs.
                  </span>
                </label>
                <div id="privacy-error" class="field-error" role="alert" aria-live="polite"></div>
              </div>

              <div class="step-actions">
                <button type="button" class="btn-back" id="backToStep1">
                  <i class="fas fa-arrow-left"></i>
                  Back
                </button>
                <button type="submit" class="btn-primary-cta" id="submitForm">
                  🚀 Get My Free Growth Plan
                </button>
              </div>
            </div>
          </form>

          <!-- Trust Elements -->
          <div class="form-trust-elements">
            <div class="response-time">
              <i class="fas fa-check-circle"></i>
              <span>Average Response Time: 15 minutes</span>
            </div>
            <div class="security-badge">
              <i class="fas fa-lock"></i>
              <span>🔒 100% Secure. No spam. Ever.</span>
            </div>
          </div>

          <!-- Proof Snippet -->
          <div class="proof-snippet">
            <div class="testimonial-quick">
              <div class="stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <p>"They helped us 3x leads in 60 days."</p>
              <span class="client-info">— Sydney Client</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column: Contact Info -->
      <div class="contact-column">
        <div class="contact-info-card">
          <h3 class="contact-title">Get in Touch</h3>

          <div class="contact-item">
            <div class="contact-icon">
              <i class="fas fa-phone"></i>
            </div>
            <div class="contact-content">
              <div class="contact-label">Call Direct</div>
              <a href="tel:+61487286451" class="contact-value">0487 286 451</a>
            </div>
          </div>

          <div class="contact-item">
            <div class="contact-icon">
              <i class="fas fa-envelope"></i>
            </div>
            <div class="contact-content">
              <div class="contact-label">Email</div>
              <a href="mailto:avi@theprofitplatform.com.au" class="contact-value">avi@theprofitplatform.com.au</a>
            </div>
          </div>

          <div class="contact-item">
            <div class="contact-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="contact-content">
              <div class="contact-label">Business Hours</div>
              <div class="contact-value">Mon-Fri: 9AM-6PM AEST</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- What Happens Next Timeline -->
    <div class="process-timeline">
      <h3 class="timeline-title">What Happens Next</h3>
      <div class="timeline-steps">
        <div class="timeline-step">
          <div class="timeline-icon">
            <i class="fas fa-phone"></i>
          </div>
          <div class="timeline-content">
            <h4>Quick 15-min Call</h4>
            <p>We'll discuss your goals and current challenges</p>
          </div>
        </div>
        <div class="timeline-arrow">
          <i class="fas fa-arrow-right"></i>
        </div>
        <div class="timeline-step">
          <div class="timeline-icon">
            <i class="fas fa-chart-bar"></i>
          </div>
          <div class="timeline-content">
            <h4>Free Audit</h4>
            <p>Comprehensive analysis of your digital presence</p>
          </div>
        </div>
        <div class="timeline-arrow">
          <i class="fas fa-arrow-right"></i>
        </div>
        <div class="timeline-step">
          <div class="timeline-icon">
            <i class="fas fa-file-alt"></i>
          </div>
          <div class="timeline-content">
            <h4>Growth Proposal</h4>
            <p>Custom strategy to achieve your goals</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Sticky Bar -->
  <div class="mobile-sticky-bar" id="mobileContactBar">
    <button class="sticky-btn primary" onclick="scrollToForm()">
      <i class="fas fa-chart-line"></i>
      <span>📈 Free Strategy Session</span>
    </button>
    <a href="tel:+61487286451" class="sticky-btn secondary">
      <i class="fas fa-phone"></i>
      <span>📞 Call Avi</span>
    </a>
  </div>
</section>

<style>
/* High-Conversion Growth Journey Styles */
.growth-journey-section {
  padding: 4rem 0;
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  position: relative;
}

.section-header {
  text-align: center;
  margin-bottom: 3rem;
}

.section-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: #1e293b;
  margin-bottom: 1rem;
}

.section-subtitle {
  font-size: 1.25rem;
  color: #64748b;
  max-width: 600px;
  margin: 0 auto;
}

.growth-funnel-container {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 3rem;
  margin-bottom: 4rem;
}

/* Form Card */
.form-card {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  border: 1px solid #e2e8f0;
}

/* Progress Indicator */
.form-progress {
  margin-bottom: 2rem;
}

.progress-steps {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1rem;
}

.progress-step {
  display: flex;
  align-items: center;
  flex-direction: column;
  position: relative;
}

.progress-step.active .step-number {
  background: #3b82f6;
  color: white;
}

.step-number {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #e2e8f0;
  color: #64748b;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.step-label {
  font-size: 0.875rem;
  color: #64748b;
  text-align: center;
}

.progress-connector {
  width: 60px;
  height: 2px;
  background: #e2e8f0;
  margin: 0 1rem;
  margin-top: -20px;
}

.progress-bar {
  width: 100%;
  height: 4px;
  background: #e2e8f0;
  border-radius: 2px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #1e40af);
  width: 50%;
  transition: width 0.3s ease;
}

/* Form Steps */
.form-step {
  display: none;
}

.form-step.active {
  display: block;
  animation: fadeInUp 0.5s ease;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.step-header {
  text-align: center;
  margin-bottom: 2rem;
}

.step-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 0.5rem;
}

.step-subtitle {
  color: #64748b;
  font-size: 1rem;
}

/* Form Elements */
.form-group {
  margin-bottom: 1.5rem;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.form-label {
  display: block;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.5rem;
}

.required {
  color: #ef4444;
}

.form-input {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 1rem;
  transition: all 0.2s ease;
}

.form-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.form-input:invalid {
  border-color: #ef4444;
}

.field-error {
  color: #ef4444;
  font-size: 0.875rem;
  margin-top: 0.25rem;
  display: none;
}

.field-error.active {
  display: block;
}

/* Service Pills */
.service-pills {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.service-radio {
  display: none;
}

.service-pill {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  background: white;
}

.service-pill:hover {
  border-color: #3b82f6;
  background: #f8fafc;
  transform: translateY(-2px);
}

.service-radio:checked + .service-pill {
  border-color: #3b82f6;
  background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

.pill-icon {
  font-size: 1.25rem;
  margin-right: 0.5rem;
}

.pill-label {
  font-weight: 600;
}

/* Goal Chips */
.goal-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}

.goal-chip {
  cursor: pointer;
}

.goal-chip input {
  display: none;
}

.chip-content {
  display: flex;
  align-items: center;
  padding: 0.75rem 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 25px;
  background: white;
  transition: all 0.2s ease;
  font-weight: 500;
}

.chip-content i {
  margin-right: 0.5rem;
}

.goal-chip:hover .chip-content {
  border-color: #3b82f6;
  background: #f8fafc;
}

.goal-chip input:checked + .chip-content {
  border-color: #3b82f6;
  background: #3b82f6;
  color: white;
}

/* Website Input */
.website-input-wrapper {
  position: relative;
}

.website-preview {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  background: #f8fafc;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.875rem;
  color: #64748b;
}

.favicon-preview {
  width: 16px;
  height: 16px;
  margin-right: 0.5rem;
}

/* Privacy Checkbox */
.privacy-checkbox {
  display: flex;
  align-items: flex-start;
  cursor: pointer;
}

.privacy-checkbox input {
  display: none;
}

.checkmark {
  width: 20px;
  height: 20px;
  border: 2px solid #d1d5db;
  border-radius: 4px;
  margin-right: 0.75rem;
  position: relative;
  flex-shrink: 0;
  margin-top: 0.125rem;
}

.privacy-checkbox input:checked + .checkmark {
  background: #3b82f6;
  border-color: #3b82f6;
}

.privacy-checkbox input:checked + .checkmark::after {
  content: '✓';
  position: absolute;
  color: white;
  font-size: 14px;
  top: -2px;
  left: 3px;
}

.privacy-text {
  font-size: 0.875rem;
  color: #6b7280;
  line-height: 1.5;
}

.privacy-text a {
  color: #3b82f6;
  text-decoration: none;
}

.privacy-text a:hover {
  text-decoration: underline;
}

/* Form Actions */
.step-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 2rem;
  gap: 1rem;
}

.btn-next, .btn-back {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-next {
  background: #3b82f6;
  color: white;
  margin-left: auto;
}

.btn-next:hover {
  background: #2563eb;
  transform: translateY(-1px);
}

.btn-back {
  background: #f8fafc;
  color: #64748b;
  border: 1px solid #e5e7eb;
}

.btn-back:hover {
  background: #e2e8f0;
}

.btn-primary-cta {
  background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 8px;
  font-size: 1.125rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  margin-left: auto;
}

.btn-primary-cta:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
}

.btn-primary-cta:active {
  transform: translateY(0) scale(0.98);
}

/* Trust Elements */
.form-trust-elements {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid #e5e7eb;
  font-size: 0.875rem;
  color: #64748b;
}

.response-time, .security-badge {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.response-time i {
  color: #10b981;
}

.security-badge i {
  color: #6b7280;
}

/* Proof Snippet */
.proof-snippet {
  margin-top: 1.5rem;
  text-align: center;
  padding: 1.5rem;
  background: #f8fafc;
  border-radius: 12px;
  border-left: 4px solid #3b82f6;
}

.stars {
  color: #fbbf24;
  margin-bottom: 0.5rem;
}

.testimonial-quick p {
  font-style: italic;
  color: #374151;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.client-info {
  color: #6b7280;
  font-size: 0.875rem;
}

/* Contact Column */
.contact-info-card {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  border: 1px solid #e2e8f0;
  height: fit-content;
}

.contact-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 1.5rem;
}

.contact-item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 1.5rem;
}

.contact-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  margin-right: 1rem;
  flex-shrink: 0;
}

.contact-content {
  flex: 1;
}

.contact-label {
  font-weight: 600;
  color: #374151;
  font-size: 0.875rem;
  margin-bottom: 0.25rem;
}

.contact-value {
  color: #1e293b;
  font-size: 1.1rem;
  text-decoration: none;
}

.contact-value:hover {
  color: #3b82f6;
}

/* Process Timeline */
.process-timeline {
  margin-top: 3rem;
  text-align: center;
}

.timeline-title {
  font-size: 1.875rem;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 2rem;
}

.timeline-steps {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  gap: 1.5rem;
}

.timeline-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  max-width: 200px;
}

.timeline-icon {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

.timeline-content h4 {
  font-size: 1.125rem;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 0.5rem;
}

.timeline-content p {
  color: #64748b;
  font-size: 0.875rem;
  line-height: 1.5;
}

.timeline-arrow {
  color: #3b82f6;
  font-size: 1.5rem;
}

/* Mobile Sticky Bar */
.mobile-sticky-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: white;
  padding: 1rem;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
  border-top: 1px solid #e5e7eb;
  display: none;
  z-index: 1000;
}

.mobile-sticky-bar .sticky-btn {
  flex: 1;
  padding: 0.75rem 1rem;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  text-decoration: none;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  cursor: pointer;
}

.mobile-sticky-bar {
  display: flex;
  gap: 0.75rem;
}

.sticky-btn.primary {
  background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
  color: white;
}

.sticky-btn.secondary {
  background: #f8fafc;
  color: #374151;
  border: 1px solid #e5e7eb;
}

/* Honeypot */
.honeypot {
  position: absolute;
  left: -9999px;
  width: 1px;
  height: 1px;
  opacity: 0;
}

/* Form Messages */
.form-message {
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
}

.success-message {
  background: #dcfce7;
  border: 1px solid #22c55e;
  color: #166534;
}

.error-message {
  background: #fef2f2;
  border: 1px solid #ef4444;
  color: #991b1b;
}

.message-icon {
  font-size: 1.25rem;
  margin-top: 0.125rem;
}

.message-content h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1.125rem;
}

.message-content p {
  margin: 0;
}

/* Responsive Design */
@media (max-width: 768px) {
  .growth-funnel-container {
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  .form-card, .contact-info-card {
    padding: 1.5rem;
  }

  .form-row {
    grid-template-columns: 1fr;
  }

  .service-pills {
    grid-template-columns: 1fr;
  }

  .timeline-steps {
    flex-direction: column;
  }

  .timeline-arrow {
    transform: rotate(90deg);
  }

  .mobile-sticky-bar {
    display: flex;
  }

  .step-actions {
    flex-direction: column;
  }

  .btn-next, .btn-primary-cta {
    width: 100%;
    margin-left: 0;
  }

  .form-trust-elements {
    flex-direction: column;
    gap: 0.75rem;
    text-align: center;
  }

  .section-title {
    font-size: 2rem;
  }

  .section-subtitle {
    font-size: 1.125rem;
  }
}

@media (max-width: 480px) {
  .growth-journey-section {
    padding: 2rem 0;
  }

  .section-header {
    margin-bottom: 2rem;
  }

  .goal-chips {
    flex-direction: column;
  }

  .timeline-icon {
    width: 60px;
    height: 60px;
    font-size: 1.25rem;
  }

  .progress-steps {
    flex-direction: column;
    gap: 1rem;
  }

  .progress-connector {
    width: 2px;
    height: 30px;
    margin: 0;
  }
}
</style>

<script>
// High-Conversion Growth Funnel JavaScript
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('growthFunnelForm');
  const step1 = document.getElementById('step1');
  const step2 = document.getElementById('step2');
  const nextBtn = document.getElementById('nextToStep2');
  const backBtn = document.getElementById('backToStep1');
  const progressFill = document.getElementById('progressFill');
  const progressSteps = document.querySelectorAll('.progress-step');
  const phoneInput = document.querySelector('.phone-input');
  const websiteInput = document.querySelector('.website-input');
  const websitePreview = document.getElementById('websitePreview');

  let currentStep = 1;

  // Step Navigation
  nextBtn.addEventListener('click', function() {
    if (validateStep1()) {
      goToStep(2);
    }
  });

  backBtn.addEventListener('click', function() {
    goToStep(1);
  });

  function goToStep(stepNumber) {
    if (stepNumber === 1) {
      step1.classList.add('active');
      step2.classList.remove('active');
      progressFill.style.width = '50%';
      progressSteps[0].classList.add('active');
      progressSteps[1].classList.remove('active');
    } else if (stepNumber === 2) {
      step1.classList.remove('active');
      step2.classList.add('active');
      progressFill.style.width = '100%';
      progressSteps[0].classList.remove('active');
      progressSteps[1].classList.add('active');
    }
    currentStep = stepNumber;
  }

  // Form Validation
  function validateStep1() {
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const service = document.querySelector('input[name="service"]:checked');

    let isValid = true;

    // Name validation
    if (!name) {
      showFieldError('name', 'Please enter your name');
      isValid = false;
    } else {
      hideFieldError('name');
    }

    // Email validation
    if (!email) {
      showFieldError('email', 'Please enter your email address');
      isValid = false;
    } else if (!isValidEmail(email)) {
      showFieldError('email', 'Please enter a valid email address');
      isValid = false;
    } else {
      hideFieldError('email');
    }

    // Service validation
    if (!service) {
      showFieldError('service', 'Please select a service');
      isValid = false;
    } else {
      hideFieldError('service');
    }

    return isValid;
  }

  function validateStep2() {
    const privacyConsent = document.querySelector('input[name="privacy_consent"]:checked');
    let isValid = true;

    if (!privacyConsent) {
      showFieldError('privacy', 'Please agree to the Privacy Policy to continue');
      isValid = false;
    } else {
      hideFieldError('privacy');
    }

    return isValid;
  }

  function showFieldError(fieldName, message) {
    const errorElement = document.getElementById(fieldName + '-error');
    if (errorElement) {
      errorElement.textContent = message;
      errorElement.classList.add('active');
    }
  }

  function hideFieldError(fieldName) {
    const errorElement = document.getElementById(fieldName + '-error');
    if (errorElement) {
      errorElement.textContent = '';
      errorElement.classList.remove('active');
    }
  }

  function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  // Australian Phone Formatting
  if (phoneInput) {
    phoneInput.addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');

      if (value.startsWith('61')) {
        value = value.substring(2);
      }
      if (value.startsWith('0')) {
        value = value.substring(1);
      }

      if (value.length <= 3) {
        e.target.value = value ? `+61 ${value}` : '';
      } else if (value.length <= 6) {
        e.target.value = `+61 ${value.substring(0, 3)} ${value.substring(3)}`;
      } else {
        e.target.value = `+61 ${value.substring(0, 3)} ${value.substring(3, 6)} ${value.substring(6, 9)}`;
      }
    });
  }

  // Website Input with Favicon Preview
  if (websiteInput) {
    websiteInput.addEventListener('blur', function(e) {
      let url = e.target.value.trim();

      if (url && !url.startsWith('http://') && !url.startsWith('https://')) {
        url = 'https://' + url;
        e.target.value = url;
      }

      if (url) {
        updateWebsitePreview(url);
      } else {
        websitePreview.style.display = 'none';
      }
    });
  }

  function updateWebsitePreview(url) {
    try {
      const domain = new URL(url).hostname;
      const faviconUrl = `https://www.google.com/s2/favicons?domain=${domain}&sz=16`;

      const favicon = websitePreview.querySelector('.favicon-preview');
      const domainSpan = websitePreview.querySelector('.domain-preview');

      favicon.src = faviconUrl;
      domainSpan.textContent = domain;
      websitePreview.style.display = 'flex';
    } catch {
      websitePreview.style.display = 'none';
    }
  }

  // Form Submission
  form.addEventListener('submit', function(e) {
    e.preventDefault();

    if (currentStep === 1) {
      if (validateStep1()) {
        goToStep(2);
      }
      return;
    }

    if (!validateStep2()) {
      return;
    }

    // Check honeypot
    const honeypot = form.querySelector('input[name="company_website"]');
    if (honeypot.value) {
      return; // Spam detected
    }

    submitForm();
  });

  async function submitForm() {
    const submitBtn = document.getElementById('submitForm');
    const originalText = submitBtn.innerHTML;

    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';

    try {
      const formData = new FormData(form);

      // Add UTM parameters if available
      const urlParams = new URLSearchParams(window.location.search);
      ['utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term'].forEach(param => {
        if (urlParams.has(param)) {
          formData.append(param, urlParams.get(param));
        }
      });

      const response = await fetch('/api/contact', {
        method: 'POST',
        body: formData
      });

      if (response.ok) {
        showSuccess();
      } else {
        throw new Error('Form submission failed');
      }
    } catch (error) {
      console.error('Form submission error:', error);
      showError();
    } finally {
      submitBtn.disabled = false;
      submitBtn.innerHTML = originalText;
    }
  }

  function showSuccess() {
    document.getElementById('form-success').style.display = 'flex';
    document.getElementById('form-error').style.display = 'none';
    form.style.display = 'none';
  }

  function showError() {
    document.getElementById('form-success').style.display = 'none';
    document.getElementById('form-error').style.display = 'flex';
  }

  // Service Auto-preselection
  const urlParams = new URLSearchParams(window.location.search);
  const serviceParam = urlParams.get('service');
  if (serviceParam) {
    const serviceMap = {
      'seo': 'service-seo',
      'google-ads': 'service-ads',
      'web-design': 'service-web',
      'full-strategy': 'service-full'
    };
    const radioId = serviceMap[serviceParam];
    if (radioId) {
      const radio = document.getElementById(radioId);
      if (radio) {
        radio.checked = true;
      }
    }
  }

  // Mobile Detection and Sticky Bar
  function isMobile() {
    return window.innerWidth <= 768;
  }

  function toggleMobileBar() {
    const mobileBar = document.getElementById('mobileContactBar');
    if (isMobile()) {
      mobileBar.style.display = 'flex';
    } else {
      mobileBar.style.display = 'none';
    }
  }

  // Scroll to form function
  window.scrollToForm = function() {
    document.getElementById('growth-journey').scrollIntoView({
      behavior: 'smooth'
    });
  };

  // Initialize
  toggleMobileBar();
  window.addEventListener('resize', toggleMobileBar);
});
</script>