!function(){"use strict";const e={emailNotifications:!0,exitIntentPopup:!0,tracking:!0,performanceOptimization:!0};function t(e,t=!0){return new Promise(((n,o)=>{const i=document.createElement("script");i.src=e,i.async=t,i.onload=n,i.onerror=o,document.head.appendChild(i)}))}async function n(){if(console.log("🚀 Initializing emergency fixes..."),e.tracking)try{await t("/js/tracking-implementation.js"),console.log("✅ Tracking loaded")}catch(e){console.error("❌ Tracking failed to load:",e)}if(e.emailNotifications)try{await t("/js/email-notification-handler.js"),console.log("✅ Email notifications loaded")}catch(e){console.error("❌ Email notifications failed to load:",e)}e.exitIntentPopup&&setTimeout((()=>{t("/js/exit-intent-popup.js").then((()=>console.log("✅ Exit intent popup loaded"))).catch((e=>console.error("❌ Exit intent popup failed:",e)))}),2e3),e.performanceOptimization&&function(){if("IntersectionObserver"in window){const e=document.querySelectorAll("img[data-src]"),t=new IntersectionObserver(((e,n)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.removeAttribute("data-src"),t.unobserve(n)}}))}));e.forEach((e=>t.observe(e)))}["https://www.googletagmanager.com","https://connect.facebook.net","https://static.hotjar.com","https://formspree.io"].forEach((e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,document.head.appendChild(t)}));document.querySelectorAll("link[data-defer]").forEach((e=>{e.media="print",e.addEventListener("load",(()=>{e.media="all"}))})),console.log("✅ Performance optimizations applied")}(),console.log("✨ Emergency fixes initialization complete")}window.addEventListener("error",(e=>{window.TPPTracking&&window.TPPTracking.trackEvent&&window.TPPTracking.trackEvent("error","javascript_error",e.message)})),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();